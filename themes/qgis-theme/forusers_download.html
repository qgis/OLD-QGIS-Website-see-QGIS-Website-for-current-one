<section class="intro">
    <div class="container">
        <h2>{{ _('Download QGIS for your platform') }}</h2>
        <p class="main">{{ _('Binary packages (installers) are available from this page.') }}</p>
        <p class="main">{{ _('The current version is QGIS %s \'%s\' and was released on %s.')|format( release, codename, releasedate.strftime('%d.%m.%Y') ) }}</p>
        <p class="main">{{ _('The long-term repositories currently offer QGIS %s \'%s\'.')|format( ltrrelease, ltrcodename ) }}</p>
        <p class="main">{{ _('QGIS is available on Windows, macOS, Linux and Android.') }}</p>
{% if infeaturefreeze == True %}
        <p class="main">
          {{ _('We are currently in feature freeze preceeding the release of QGIS %s. <b>Please consider testing the prereleases</b>. See ')|format(nextversion) }}
	  <a href="{{ pathto('site/getinvolved/development/roadmap') }}#location-of-prereleases-nightly-builds">{{ _("road map") }}</a>.
        </p>
{% endif %}
    </div>
</section>
<section class="content">
    <div class="container">
        <ul class="nav nav-tabs" id="tabs">
          <li class="active"><a href="#tab1">{{ _('Installation Downloads') }}</a></li>
          <li><a href="#tab2">{{ _('All Releases') }}</a></li>
          <li><a href="#tab3">{{ _('Sources') }}</a></li>
        </ul>

        <div class="tab-content">

          <!-- Tab 1 -->
          <div class="tab-pane active" id="tab1">
            <!-- Downloads Accordion -->
              <a name="windows"></a>
              <div class="accordion" id="downloads">
                <div class="accordion-group">
                  <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#downloads" href="#windows">
                      <h4>{{ _('Download for Windows') }} <i class="icon-chevron-down pull-right"></i></h4>
                    </a>
                  </div>
                  <div id="windows" class="accordion-body collapse in">
                    <div class="accordion-inner">
                      <div>
                        <h5>{{ _('QGIS in OSGeo4W (recommended for regular users):') }}</h5>
                        <a href="https://download.osgeo.org/osgeo4w/v2/osgeo4w-setup.exe" class="reference external">
                        <ul class="inline download-row">
                          <li><i class="icon-large icon-download-alt"></i></li>
                          <li class="osgeo-download"></li>
                          <li class="download-text">{{ _('OSGeo4W Network Installer') }}</li>
                        </ul>
                        </a>
                        <p>
			{{ _('In the installer choose ') }}<strong>{{ _('Express Install') }}</strong> {{ _('and select') }} <strong>{{ _('QGIS') }}</strong> {{ _('to install the <em>latest release</em> or ') }} <strong> {{ _('QGIS LTR') }} </strong> {{ _('to install the <em>long term release</em>.') }}<br/>
			{{ _('The express installations have several optional packages including non-free software. To avoid those you have to use the') }} <strong>{{ _('Advanced Install') }}</strong> {{ _('and choose') }} <strong> qgis </strong> {{ _('and/or') }} <strong> qgis-ltr </strong> {{ _('in the desktop section.') }}<br/> <br/>
                        <strong><font color="red"><em>{{ _('NOTE FOR EXISTING USERS') }}:</em></font></strong> {{ _('OSGeo4W v2 (previously known as testing) is now the regular repository.  The latest QGIS release is only available here, as it already requires dependencies not available in the old repository. The long term release is additionally also available in the old repository using the same dependencies as before (see below). This also includes a 32-bit version, which OSGeo4W v2 does not support.') }} <br/>
			<strong><font color="red"><em>{{ _('CAUTION') }}:</em></font></strong> {{ _('Upgrades of old setups using the new repository are not supported. You need to do a fresh install or use a different directory.') }}<br/>
			<strong><font color="red"><em>{{ _('CAUTION') }}:</em></font></strong> {{ _('Windows 7 no longer works as we are now using Python 3.9, which dropped support for it.') }}<br/>
                      <br/>
                      </div>
                      <div>
                        <h5>{{ _('Standalone installers (MSI) from OSGeo4W packages (recommended for new users)') }}</h5>
                        <h6>{{ _('Latest release (richest on features):') }}</h6>
                        <a href="https://qgis.org/downloads/QGIS-OSGeo4W-{{ release|e }}-{{ msibinary|e }}.msi" class="reference external">
                          <ul class="inline download-row">
                              <li><i class="icon-download-alt icon-large"></i></li>
                              <li class="{{ "qgis{}-download".format( "2" if version.startswith("2.") else "" ) }}"></li>
                              <li class="download-text">{{ _('QGIS Standalone Installer Version %s')|format( version ) }}</li>
                          </ul>
                        </a>
                        <a href="https://qgis.org/downloads/QGIS-OSGeo4W-{{ release|e }}-{{ msibinary|e }}.sha256sum" class="reference external button">
                          <ul class="inline download-row">
                              <li></li>
                              <li></li>
                              <li class="download-text">sha256</li>
                          </ul>
                        </a>
                        <h6>{{ _('Long term release (most stable):') }}</h6>
                        <a href="https://qgis.org/downloads/QGIS-OSGeo4W-{{ ltrrelease|e }}-{{ msiltrbinary|e }}.msi" class="reference external">
                          <ul class="inline download-row">
                              <li><i class="icon-download-alt icon-large"></i></li>
                              <li class="{{ "qgis{}-download".format( "2" if ltrversion.startswith("2.") else "" ) }}"></li>
                              <li class="download-text">{{ _('QGIS Standalone Installer Version %s')|format( ltrversion ) }}</li>
                          </ul>
                        </a>
                        <a href="https://qgis.org/downloads/QGIS-OSGeo4W-{{ ltrrelease|e }}-{{ msiltrbinary|e }}.sha256sum" class="reference external button">
                          <ul class="inline download-row">
                              <li></li>
                              <li></li>
                              <li class="download-text">sha256</li>
                          </ul>
                        </a>
			<p>Note that the MSI installers are much bigger than the previous installers.  This is because they include significant larger packages (eg. PROJ 8).  The main reason for the switch to MSI were the size limits previously used NSIS has, which was blocking updates of dependencies.</p>
                      </div>
                    </div>
                    <div class="accordion-inner">
                      <div>
                        <h5>{{ _('Long-term release in old OSGeo4W (continued with previous dependencies):') }}</h5>
                        <a href="https://download.osgeo.org/osgeo4w/osgeo4w-setup-x86_64-v1.exe" class="reference external">
                        <ul class="inline download-row">
                          <li><i class="icon-large icon-download-alt"></i></li>
                          <li class="osgeo-download"></li>
                          <li class="download-text">{{ _('OSGeo4W Network Installer (64 bit)') }}</li>
                        </ul>
                        </a>
                        <a href="https://download.osgeo.org/osgeo4w/osgeo4w-setup-x86-v1.exe" class="reference external">
                        <ul class="inline download-row">
                          <li><i class="icon-large icon-download-alt"></i></li>
                          <li class="osgeo-download"></li>
                          <li class="download-text">{{ _('OSGeo4W Network Installer (32 bit)') }}</li>
                        </ul>
                        </a>
                        <p>{{ _('In the installer choose ') }}<strong>{{ _('Advanced Install') }}</strong> {{ _('and select') }} <strong>{{ _('qgis-ltr-full') }}</strong> {{ _('to install the <em>long term release</em>.') }}<br/>
			{{ _('Packages for the latest release and nightly thereof and master are discontinued in old OSGeo4W.') }} <br/>
			{{ _('This installer also allows installing QGIS without non-free software') }}
                      <br/>
                      </div>
                      <div>
                        <h6>{{ _('Standalone installer for long term release (continued with dependencies from old OSGeo4W):') }}</h6>
                        <a href="https://qgis.org/downloads/QGIS-OSGeo4W-{{ ltrrelease|e }}-{{ ltrbinary|e }}-Setup-x86_64.exe" class="reference external">
                          <ul class="inline download-row">
                              <li><i class="icon-download-alt icon-large"></i></li>
                              <li class="{{ "qgis{}-download".format( "2" if ltrversion.startswith("2.") else "" ) }}"></li>
                              <li class="download-text">{{ _('QGIS Standalone Installer Version %s (64 bit)')|format( ltrversion ) }}</li>
                          </ul>
                        </a>
                        <a href="https://qgis.org/downloads/QGIS-OSGeo4W-{{ ltrrelease|e }}-{{ ltrbinary|e }}-Setup-x86_64.exe.sha256sum" class="reference external button">
                          <ul class="inline download-row">
                              <li></li>
                              <li></li>
                              <li class="download-text">sha256</li>
                          </ul>
                        </a>
                        <a href="https://qgis.org/downloads/QGIS-OSGeo4W-{{ ltrrelease|e }}-{{ ltrbinary|e }}-Setup-x86.exe" class="reference external">
                          <ul class="inline download-row">
                              <li><i class="icon-download-alt icon-large"></i></li>
                              <li class="{{ "qgis{}-download".format( "2" if ltrversion.startswith("2.") else "" ) }}"></li>
                              <li class="download-text">{{ _('QGIS Standalone Installer Version %s (32 bit)')|format( ltrversion ) }}</li>
                          </ul>
                        </a>
                        <a href="https://qgis.org/downloads/QGIS-OSGeo4W-{{ ltrrelease|e }}-{{ ltrbinary|e }}-Setup-x86.exe.sha256sum" class="reference external button">
                          <ul class="inline download-row">
                              <li></li>
                              <li></li>
                              <li class="download-text">sha256</li>
                          </ul>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
                <a name="mac"></a>
                <div class="accordion-group">
                  <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#downloads" href="#mac">
                      <h4>{{ _('Download for macOS') }} <i class="icon-chevron-down pull-right"></i></h4>
                    </a>
                  </div>
                  <div id="mac" class="accordion-body collapse in">
                    <div class="accordion-inner">
                      <h4>{{ _('Official All-in-one, signed installers') }}</h4>
                      <p>{{ _('Mac Installer Packages for macOS High Sierra (10.13) and newer.') }}</p>
                      <p>{{ _('QGIS is not yet notarized as required by macOS Catalina (10.15) security rules. On first launch, please right-click on the QGIS app icon, hold down the Option key, then choose Open.') }}</p>
                      <h6>{{ _('Latest release (richest on features):') }}</h6>
                      <a href="https://qgis.org/downloads/macos/qgis-macos-pr.dmg" class="reference external button">
                        <ul class="inline download-row">
                          <li><i class="icon-download-alt icon-large"></i></li>
                          <li class="{{ "qgis{}-download".format( "2" if version.startswith("2.") else "" ) }}"></li>
                          <li class="download-text">{{ _('QGIS macOS Installer Version %s')|format( version ) }}</li>
                        </ul>
                      </a>
                      <h6>{{ _('Long term release (most stable):') }}</h6>
                      <a href="https://qgis.org/downloads/macos/qgis-macos-ltr.dmg" class="reference external button">
                        <ul class="inline download-row">
                          <li><i class="icon-download-alt icon-large"></i></li>
                          <li class="{{ "qgis{}-download".format( "2" if ltrversion.startswith("2.") else "" ) }}"></li>
                          <li class="download-text">{{ _('QGIS macOS Installer Version %s')|format( ltrversion ) }}</li>
                        </ul>
                      </a>
                      <h4>{{ _('Alternative build') }}</h4>

                      <p>{{ _('Mac Installer Packages for macOS High Sierra (10.13) and newer.') }}</p>
                      <p>{{ _('Installation instructions are in the Read Me on the disk image. GDAL and Python (both included on the disk image) are installed separately and outside the QGIS app so they are usable on their own. These packages use the python.org Python 3 - other distributions are not supported.') }}</p>
                      <a href="https://www.kyngchaos.com/software/qgis/" class="reference external button">
                        <ul class="inline download-row">
                          <li><i class="icon-download-alt icon-large"></i></li>
                          <li class="{{ "qgis-download" }}"></li>
                          <li class="download-text">{{ _('macOS Installers') }}</li>
                        </ul>
                      </a>
                    </div>
                  </div>
                </div>
                <a name="linux"></a>
                <div class="accordion-group">
                  <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#downloads" href="#linux">
                      <h4>{{ _('Download for Linux') }} <i class="icon-chevron-down pull-right"></i></h4>
                    </a>
                  </div>
                  <div id="linux" class="accordion-body collapse in">
                    <div class="accordion-inner">
                      <p>{{ _('For many flavors of GNU/Linux binary packages (rpm and deb) or software repositories (to add to your installation manager) are available. Please select your choice of distro below:') }}</p>
                      <ul>
                      <li><a href="{{ pathto('site/forusers/alldownloads') }}#debian-ubuntu">{{ _('Debian/Ubuntu') }}</a></li>
                      <li><a href="{{ pathto('site/forusers/alldownloads') }}#fedora">{{ _('Fedora') }}</a></li>
                      <li><a href="{{ pathto('site/forusers/alldownloads') }}#opensuse">{{ _('openSUSE') }}</a></li>
                      <li><a href="{{ pathto('site/forusers/alldownloads') }}#rhel-centos-scientific-linux">{{ _('RHEL, CentOS, Scientific Linux, ...') }}</a></li>
                      <li><a href="{{ pathto('site/forusers/alldownloads') }}#mandriva">{{ _('Mandriva') }}</a></li>
                      <li><a href="{{ pathto('site/forusers/alldownloads') }}#slackware">{{ _('Slackware') }}</a></li>
                      <li><a href="{{ pathto('site/forusers/alldownloads') }}#archlinux">{{ _('Arch Linux') }}</a></li>
                      <li><a href="{{ pathto('site/forusers/alldownloads') }}#flatpak">{{ _('Flatpak') }}</a></li>
                      </ul>
                      <p class="download-text"><a href="{{ pathto('site/forusers/alldownloads') }}#linux">{{ _('Linux Installation Instructions') }}</a></p>
                    </div>
                  </div>
                </div>
                <a name="bsd"></a>
                <div class="accordion-group">
                  <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#downloads" href="#bsd">
                      <h4>{{ _('Download for BSD') }} <i class="icon-chevron-down pull-right"></i></h4>
                    </a>
                  </div>
                  <div id="bsd" class="accordion-body collapse in">
                    <div class="accordion-inner">
                      <p class="download-text"><a href="{{ pathto('site/forusers/alldownloads') }}#freebsd">{{ _('BSD Installation Instructions') }} </a></p>
                    </div>
                  </div>
                </div>
                <a name="apps"></a>
                <div class="accordion-group">
                  <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#downloads" href="#apps">
                      <h4>{{ _('Apps for mobile and tablet') }} <i class="icon-chevron-down pull-right"></i></h4>
                    </a>
                  </div>
                  <div id="apps" class="accordion-body collapse in">
                    <div class="accordion-inner">
                        <p>{{ _('The QGIS experience does not stop on the desktop. Various touch optimized apps allow you to take QGIS into the field') }}</p>
                        <h4>{{ _('Third-party touch optimized apps') }}</h4>
                        <h5 class="app-name"><a href="https://qfield.org">{{ _('QField for QGIS (formerly QGIS for Android)') }}</a></h5>
                        <div class='app-download-buttons clearfix'>
                            <a class='app-download-button' href='https://play.google.com/store/apps/details?id=ch.opengis.qfield&utm_source=qgis.org'><img alt='Get it on Google Play' src="{{pathto('_static/images/app_download_play_store.png', 1)}}"/></a>
                            <a class='app-download-button' href='https://download.opengis.ch/qfield/ci-builds/win/'><img alt='Get it for Windows' src="{{pathto('_static/images/app_download_windows.png', 1)}}"/></a>
                            <a class='app-download-button' href='https://www.github.com/opengisch/qfield/releases'><img alt='Get it on GitHub' src="{{pathto('_static/images/app_download_gh.png', 1)}}"/></a>
                        </div>
                        <h5 class="app-name"><a href="https://inputapp.io/">{{ _('Input (available for Android, iOS and Windows devices)') }}</a></h5>
                        <div class='app-download-buttons clearfix'>
                            <a class='app-download-button' href='https://play.google.com/store/apps/details?id=uk.co.lutraconsulting&utm_source=qgis.org'><img alt='Get it on Google Play' src="{{pathto('_static/images/app_download_play_store.png', 1)}}"/></a>
                            <a class='app-download-button' href='https://www.dropbox.com/s/7su0dvsg4qsgyiy/inputapp-win-x86_64-7fa4844736f549dc12e1def1ac26ad36a994c3ec.exe?dl=0'><img alt='Get it for Windows' src="{{pathto('_static/images/app_download_windows.png', 1)}}"/></a>
                            <a class='app-download-button' href='https://www.github.com/lutraconsulting/input/releases'><img alt='Get it on GitHub' src="{{pathto('_static/images/app_download_gh.png', 1)}}"/></a>
                        </div>
                        <h5 class="app-name"><a href="https://roam-docs.readthedocs.io">IntraMaps Roam</a></h5>
                        <div class='app-download-buttons clearfix'>
                            <a class='app-download-button' href='https://github.com/roam-qgis/Roam/releases'><img alt='Get it for Windows' src="{{pathto('_static/images/app_download_windows.png', 1)}}"/></a>
                            <a class='app-download-button' href='https://github.com/roam-qgis/Roam/releases'><img alt='Get it on GitHub' src="{{pathto('_static/images/app_download_gh.png', 1)}}"/></a>
                        </div>
                        <h4 class="app-name">{{ _('QGIS for Android') }}</h4>
                        <p>{{ _('An old and deprecated not touch optimised release of QGIS for Android can be found in') }}<a href="{{ pathto('site/forusers/alldownloads') }}#android">{{ _('All downloads') }}</a></p>
                    </div>
                  </div>
                </div>
              </div>
              <!-- End Accordion -->

              <h4>{{ _('All downloads') }}</h4>
              <p>
                {{ _('More specific instructions about downloading QGIS stable vs QGIS development can be found in') }} <a href="{{ pathto('site/forusers/alldownloads') }}">{{ _('All downloads') }}</a>.
              </p>

              <h4>{{ _('Datasets') }}</h4>
              <p>{{ _('For testing and learning purposes, a ') }} <a href="https://docs.qgis.org/latest/{{language}}/docs/user_manual/introduction/getting_started.html#downloading-sample-data"><strong>{{ _('sample dataset is available') }}</strong></a>, {{ _('which contains collections of data from different sources and in different formats.') }}</p>

          </div>

          <!-- Tab 2 -->
          <div class="tab-pane" id="tab2">
              <p>{{ _('Previous releases of QGIS are still available') }} <a href="https://qgis.org/downloads">{{ _('here') }}</a> {{ _(' - including older releases for OS X ') }}
              <a href="https://qgis.org/downloads/macOS/">{{ _('here') }}</a>.</p>
              <p>{{ _('More older releases are available') }} <a href="https://download.osgeo.org/qgis/" class="reference external">{{ _('here') }}</a>
              {{ _('and') }}
              {{ _('for OS X ') }} <a href="https://www.kyngchaos.com/software/archive/" class="reference external">{{ _('here') }}</a>.</p>
              <p>{{ _('Plugins for QGIS are also available ') }}<a href="https://plugins.qgis.org/plugins/" class="reference external">{{ _('here') }}</a>.</p>
          </div>

          <!-- Tab 3 -->
          <div class="tab-pane" id="tab3">
              <p>{{ _('QGIS is open source software available under the terms of the') }} <b>{{ _('GNU General Public License') }}</b> {{ _('meaning that its source code can be downloaded through tarballs or the git repository.') }}</p>
              <p>{{ _('QGIS Source Code is available ') }}
                 <a href="https://qgis.org/downloads/qgis-latest.tar.bz2">{{ _('here (latest release)') }}</a>
                 {{ _('and') }}
                 <a href="https://qgis.org/downloads/qgis-latest-ltr.tar.bz2">{{ _('here (long term release)') }}</a></p>
              <p>{{ _('Refer to the INSTALL guide on how to compile QGIS from source for the different platforms:') }} <a href="https://github.com/qgis/QGIS/blob/master/INSTALL.md"  class="reference external">{{ _('here') }}</a></p>
              <p>{{ _('Note that you can also install the development version (nightly) via an installer from the normal downloads for your platform:') }} <a class="caption-link" href="{{ pathto('site/forusers/download') }}" target="_blank">{{ _('here')}}</a></p>
              <p>{{ _('Plugins for QGIS are also available ') }}<a href="https://plugins.qgis.org/plugins/" class="reference external">{{ _('here') }}</a>.</p>
          </div>
        </div>

        <script>

          $(function () {
            $('#tabs a').click(function (e) {
              e.preventDefault();
              $(this).tab('show');
            });

            // Detect browser and open accordion tab for that os
            var os = "unknown";
			if (navigator.platform.toUpperCase().indexOf("WIN")!=-1) os="windows";
			if (navigator.platform.toUpperCase().indexOf("MAC")!=-1) os="mac";
			if (navigator.platform.toUpperCase().indexOf("X11")!=-1) os="unix";
			if (navigator.platform.toUpperCase().indexOf("LINUX")!=-1) os="linux";
			if (navigator.platform.toUpperCase().indexOf("BSD")!=-1) os="bsd";
			if (navigator.platform.toUpperCase().indexOf("ANDROID")!=-1) os="apps";

            // Add handler for accordion toggles
            $('.accordion-toggle').click(function(){
                var el = $(this).find("i");
                if (el.hasClass("icon-chevron-down")) {
                  el.removeClass("icon-chevron-down")
                    .addClass("icon-chevron-left");
                } else {
                  el.removeClass("icon-chevron-left")
                    .addClass("icon-chevron-down");
                }
            });

            // Close unrelated if 1. hash tag is detected or 2. os is detected
            var url = window.location.hash;
            var hash = url.substring(url.lastIndexOf('#'), url.length);
            var look_for = (hash == "" || hash == -1) ? os : hash.substring(1, hash.length);

            $('.accordion-body').each(function(){
              if ($(this).attr('id').toLowerCase() !== look_for) {
                $(this).prev().children(":first-child").click();
              }
            });


          })
        </script>
    </div>
</section>
